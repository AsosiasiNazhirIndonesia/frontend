{"ast":null,"code":"var _jsxFileName = \"C:\\\\spasi\\\\frontend\\\\src\\\\components\\\\Table\\\\TableCertificate.js\",\n  _s = $RefreshSig$();\nimport { Component, useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { ACTOR, CERTIFICATE_STATUS } from \"../../constants/component.constant\";\nimport CertificateSet from \"../../contracts/digital_certificate\";\nimport { setDeleteSelectedData } from \"../../modules/actions/delete.action\";\nimport web3 from \"../../services/web3\";\nimport \"./Table.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default _s(props => {\n  _s();\n  const [certificateStatus, setCertificateStatus] = useState({});\n  const dispatch = useDispatch();\n  const getCertificateStatus = async tokenId => {\n    const newCertificateStatus = {\n      ...certificateStatus\n    };\n    for (const {\n      scAddress\n    } of props.certificates) {\n      if (!web3.utils.isAddress(scAddress)) {\n        continue;\n      }\n      const certificateSet = CertificateSet.getNewInstance(scAddress);\n      newCertificateStatus[scAddress] = CERTIFICATE_STATUS[await certificateSet.methods.status(tokenId).call()];\n      // newCertificateStatus[scAddress] = CERTIFICATE_STATUS[await certificateSet.methods.status().call()];\n    }\n\n    setCertificateStatus(newCertificateStatus);\n  };\n  useEffect(() => {\n    getCertificateStatus(0);\n  }, [props.certificates]);\n  const renderTableData = () => {\n    return props.certificates.map((certificate, index) => {\n      const {\n        id,\n        date,\n        documentName,\n        sendTo,\n        signaturedBy,\n        status,\n        scAddress,\n        tokenId\n      } = certificate; //destructuring\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: documentName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: sendTo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: signaturedBy\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: getCertificateStatus(tokenId)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              color: \"black\"\n            },\n            to: `/dashboard/${props.actor}?menu=manage-certificate&view_certificate=true&certificate_id=${id}`,\n            children: \"View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 13\n          }, this), props.actor === ACTOR.ADMIN ? ',' : '', props.actor === ACTOR.ADMIN ? /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              color: \"red\"\n            },\n            to: \"\",\n            onClick: e => {\n              e.preventDefault();\n              props.setIsDelete(true);\n              dispatch(setDeleteSelectedData(certificate));\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this)]\n      }, id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  const renderTableHeader = () => {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Document Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Send To\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Signed By\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Action\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"certificate-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: renderTableHeader()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        className: \"content-table\",\n        children: renderTableData(props)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}, \"BfExM6n0vaJtjoXtca1bAEotWLE=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"names":["Component","useEffect","useState","useDispatch","Link","ACTOR","CERTIFICATE_STATUS","CertificateSet","setDeleteSelectedData","web3","jsxDEV","_jsxDEV","Fragment","_Fragment","_s","props","certificateStatus","setCertificateStatus","dispatch","getCertificateStatus","tokenId","newCertificateStatus","scAddress","certificates","utils","isAddress","certificateSet","getNewInstance","methods","status","call","renderTableData","map","certificate","index","id","date","documentName","sendTo","signaturedBy","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","to","actor","ADMIN","onClick","e","preventDefault","setIsDelete","renderTableHeader","className"],"sources":["C:/spasi/frontend/src/components/Table/TableCertificate.js"],"sourcesContent":["import { Component, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ACTOR, CERTIFICATE_STATUS } from \"../../constants/component.constant\";\r\nimport CertificateSet from \"../../contracts/digital_certificate\";\r\nimport { setDeleteSelectedData } from \"../../modules/actions/delete.action\";\r\nimport web3 from \"../../services/web3\";\r\nimport \"./Table.scss\";\r\n\r\nexport default (props) => {\r\n  const [certificateStatus, setCertificateStatus] = useState({});\r\n  const dispatch = useDispatch();\r\n  \r\n  const getCertificateStatus = async (tokenId) => {\r\n    const newCertificateStatus = { ...certificateStatus };\r\n    for (const {scAddress} of props.certificates) {\r\n      if (!web3.utils.isAddress(scAddress)) {\r\n        continue;\r\n      }\r\n      const certificateSet = CertificateSet.getNewInstance(scAddress);\r\n      newCertificateStatus[scAddress] = CERTIFICATE_STATUS[await certificateSet.methods.status(tokenId).call()];\r\n      // newCertificateStatus[scAddress] = CERTIFICATE_STATUS[await certificateSet.methods.status().call()];\r\n    }\r\n    setCertificateStatus(newCertificateStatus);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getCertificateStatus(0);\r\n  }, [props.certificates] );\r\n\r\n  const renderTableData = () => {\r\n    return props.certificates.map((certificate, index) => {\r\n      const { id, date, documentName, sendTo, signaturedBy, status, scAddress, tokenId } = certificate; //destructuring\r\n      return (\r\n        <tr key={id}>\r\n          <td>{date}</td>\r\n          <td>{documentName}</td>\r\n          <td>{sendTo}</td>\r\n          <td>{signaturedBy}</td>\r\n          <td>{getCertificateStatus(tokenId)}</td>\r\n          <td>\r\n            <Link\r\n              style={{ color: \"black\" }}\r\n              to={`/dashboard/${props.actor}?menu=manage-certificate&view_certificate=true&certificate_id=${id}`}\r\n            >\r\n              View\r\n            </Link>\r\n            {props.actor === ACTOR.ADMIN ? ',' : ''}\r\n            {props.actor === ACTOR.ADMIN ?\r\n            <Link\r\n              style={{ color: \"red\" }}\r\n              to=\"\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                props.setIsDelete(true);\r\n                dispatch(setDeleteSelectedData(certificate));\r\n              }}\r\n            >\r\n              Delete\r\n            </Link> : <></>}\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n\r\n  const renderTableHeader = () => {\r\n    return (\r\n      <tr>\r\n        <th>Date</th>\r\n        <th>Document Name</th>\r\n        <th>Send To</th>\r\n        <th>Signed By</th>\r\n        <th>Status</th>\r\n        <th>Action</th>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <table className=\"certificate-table\">\r\n        <thead>{renderTableHeader()}</thead>\r\n        <tbody className=\"content-table\">\r\n          {renderTableData(props)}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}