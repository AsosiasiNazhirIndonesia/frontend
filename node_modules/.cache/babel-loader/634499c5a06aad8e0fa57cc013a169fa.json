{"ast":null,"code":"var _jsxFileName = \"C:\\\\frontend\\\\src\\\\pages\\\\ProfilePage\\\\ProfilePage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect, useParams, withRouter } from \"react-router-dom\";\nimport Header from \"../../components/Header/Header\";\nimport SearchCertificate from \"../../components/SearchCertifcate/SearchCertificate\";\nimport Sidebar from \"../../components/Sidebar/Sidebar\";\nimport { ACTOR, ACTOR_TOKEN } from \"../../constants/component.constant\";\nimport { setActorType, setAdmin, setUser } from \"../../modules/actions/actor.action\";\nimport ManageCertificate from \"../ManageCertificate/ManageCertificate\";\nimport InstitutionMaster from \"../ManageUser/InstitutionMaster/InstitutionMaster\";\nimport UserMaster from \"../ManageUser/UserMaster/UserMaster\";\nimport API from \"../../services/api\";\nimport jwt from \"jsonwebtoken\";\nimport \"./ProfilePage.scss\";\nimport { history } from \"../../store\";\nimport AdminMaster from \"../ManageUser/AdminMaster/AdminMaster\";\nimport CertificateTypeMaster from \"../ManageCertificate/CertificateTypeMaster/CertificateTypeMaster\";\nimport ProfilePageContent from \"./ProfilePageContent\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = props => {\n  _s();\n  const actor = useParams().actor_type;\n  const menu = new URLSearchParams(props.location.search).get(\"menu\");\n  const getToken = () => {\n    let token = localStorage.getItem(ACTOR_TOKEN.DIGICERT_USER_TOKEN);\n    if (actor === ACTOR.ADMIN) {\n      token = localStorage.getItem(ACTOR_TOKEN.DIGICERT_ADMIN_TOKEN);\n    }\n    return token;\n  };\n  const getActorDetails = async () => {\n    const token = getToken();\n    if (!token) {\n      history.push(\"/\");\n      return;\n    }\n    const decodedToken = jwt.decode(token);\n    if (actor === ACTOR.ADMIN) {\n      await props.getAdmin(decodedToken.public_key);\n    } else if (actor === ACTOR.USER) {\n      await props.getUser(decodedToken.public_key);\n    }\n  };\n  useEffect(() => {\n    getActorDetails();\n  }, []);\n  const resolveContent = () => {\n    // switch (menu) {\n    //   case \"institution-master\":\n    //     return <InstitutionMaster />;\n    //   case \"user-master\":\n    //     return <UserMaster />;\n    //   case \"admin-master\":\n    //     return <AdminMaster />;\n    //   case \"certificate-type-master\":\n    //     return <CertificateTypeMaster />;\n    //   case \"manage-certificate\":\n    //     return <ManageCertificate />;\n    //   default:\n    return /*#__PURE__*/_jsxDEV(ProfilePageContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 16\n    }, this);\n    // }\n  };\n\n  const resolveActor = () => {\n    let actorObj;\n    if (actor === ACTOR.ADMIN && props.admin) {\n      actorObj = props.admin;\n    } else if (actor === ACTOR.USER && props.admin) {\n      actorObj = props.user;\n    }\n    return actorObj;\n  };\n  const logout = () => {\n    switch (actor) {\n      case ACTOR.ADMIN:\n        localStorage.removeItem(ACTOR_TOKEN.DIGICERT_ADMIN_TOKEN);\n        props.logoutAdmin();\n        break;\n      case ACTOR.USER:\n        localStorage.removeItem(ACTOR_TOKEN.DIGICERT_USER_TOKEN);\n        props.logoutUser();\n        break;\n      default:\n        break;\n    }\n    history.push(\"/\");\n  };\n  if (!actor) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/dashboard/USER\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      type: actor,\n      actor: resolveActor(),\n      logout: logout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-body\",\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n        menu: menu,\n        actor: actor\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-content\",\n        children: resolveContent()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"bHGyR2jU/tIUL0sVkeTvRp7RHPI=\", false, function () {\n  return [useParams];\n});\n_c = Dashboard;\nconst mapStateToProps = state => ({\n  user: state.getIn([\"actor\", \"user\"]).toJS(),\n  admin: state.getIn([\"actor\", \"admin\"]).toJS(),\n  type: state.getIn([\"actor\", \"type\"])\n});\nconst mapDispatchToProps = dispatch => {\n  return {\n    async getUser(publicKey) {\n      try {\n        dispatch(setActorType(ACTOR.USER));\n        dispatch(setUser(await API.getUserByPublicKey(publicKey)));\n      } catch (e) {\n        console.log(e);\n        throw e;\n      }\n    },\n    async getAdmin(publicKey) {\n      try {\n        dispatch(setActorType(ACTOR.ADMIN));\n        dispatch(setAdmin(await API.getAdminByPublicKey(publicKey)));\n      } catch (e) {\n        console.log(e);\n        throw e;\n      }\n    },\n    logoutUser() {\n      setUser({});\n    },\n    logoutAdmin() {\n      setAdmin({});\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)( /*#__PURE__*/React.memo(withRouter(Dashboard)));\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","connect","Redirect","useParams","withRouter","Header","SearchCertificate","Sidebar","ACTOR","ACTOR_TOKEN","setActorType","setAdmin","setUser","ManageCertificate","InstitutionMaster","UserMaster","API","jwt","history","AdminMaster","CertificateTypeMaster","ProfilePageContent","jsxDEV","_jsxDEV","Dashboard","props","_s","actor","actor_type","menu","URLSearchParams","location","search","get","getToken","token","localStorage","getItem","DIGICERT_USER_TOKEN","ADMIN","DIGICERT_ADMIN_TOKEN","getActorDetails","push","decodedToken","decode","getAdmin","public_key","USER","getUser","resolveContent","fileName","_jsxFileName","lineNumber","columnNumber","resolveActor","actorObj","admin","user","logout","removeItem","logoutAdmin","logoutUser","to","className","children","type","_c","mapStateToProps","state","getIn","toJS","mapDispatchToProps","dispatch","publicKey","getUserByPublicKey","e","console","log","getAdminByPublicKey","memo","$RefreshReg$"],"sources":["C:/frontend/src/pages/ProfilePage/ProfilePage.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, useParams, withRouter } from \"react-router-dom\";\r\nimport Header from \"../../components/Header/Header\";\r\nimport SearchCertificate from \"../../components/SearchCertifcate/SearchCertificate\";\r\nimport Sidebar from \"../../components/Sidebar/Sidebar\";\r\nimport { ACTOR, ACTOR_TOKEN } from \"../../constants/component.constant\";\r\nimport {\r\n  setActorType,\r\n  setAdmin,\r\n  setUser,\r\n} from \"../../modules/actions/actor.action\";\r\nimport ManageCertificate from \"../ManageCertificate/ManageCertificate\";\r\nimport InstitutionMaster from \"../ManageUser/InstitutionMaster/InstitutionMaster\";\r\nimport UserMaster from \"../ManageUser/UserMaster/UserMaster\";\r\nimport API from \"../../services/api\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport \"./ProfilePage.scss\";\r\nimport { history } from \"../../store\";\r\nimport AdminMaster from \"../ManageUser/AdminMaster/AdminMaster\";\r\nimport CertificateTypeMaster from \"../ManageCertificate/CertificateTypeMaster/CertificateTypeMaster\";\r\nimport ProfilePageContent from \"./ProfilePageContent\";\r\n\r\nconst Dashboard = (props) => {\r\n  const actor = useParams().actor_type;\r\n  const menu = new URLSearchParams(props.location.search).get(\"menu\");\r\n\r\n  const getToken = () => {\r\n    let token = localStorage.getItem(ACTOR_TOKEN.DIGICERT_USER_TOKEN);\r\n    if (actor === ACTOR.ADMIN) {\r\n      token = localStorage.getItem(ACTOR_TOKEN.DIGICERT_ADMIN_TOKEN);\r\n    }\r\n\r\n    return token;\r\n  };\r\n\r\n  const getActorDetails = async () => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      history.push(\"/\");\r\n      return;\r\n    }\r\n    const decodedToken = jwt.decode(token);\r\n    if (actor === ACTOR.ADMIN) {\r\n      await props.getAdmin(decodedToken.public_key);\r\n    } else if (actor === ACTOR.USER) {\r\n      await props.getUser(decodedToken.public_key);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getActorDetails();\r\n  }, []);\r\n\r\n  const resolveContent = () => {\r\n    // switch (menu) {\r\n    //   case \"institution-master\":\r\n    //     return <InstitutionMaster />;\r\n    //   case \"user-master\":\r\n    //     return <UserMaster />;\r\n    //   case \"admin-master\":\r\n    //     return <AdminMaster />;\r\n    //   case \"certificate-type-master\":\r\n    //     return <CertificateTypeMaster />;\r\n    //   case \"manage-certificate\":\r\n    //     return <ManageCertificate />;\r\n    //   default:\r\n        return <ProfilePageContent />;\r\n    // }\r\n  };\r\n\r\n  const resolveActor = () => {\r\n    let actorObj;\r\n\r\n    if (actor === ACTOR.ADMIN && props.admin) {\r\n      actorObj = props.admin;\r\n    } else if (actor === ACTOR.USER && props.admin) {\r\n      actorObj = props.user;\r\n    }\r\n\r\n    return actorObj;\r\n  };\r\n\r\n  const logout = () => {\r\n    switch (actor) {\r\n      case ACTOR.ADMIN:\r\n        localStorage.removeItem(ACTOR_TOKEN.DIGICERT_ADMIN_TOKEN);\r\n        props.logoutAdmin();\r\n        break;\r\n      case ACTOR.USER:\r\n        localStorage.removeItem(ACTOR_TOKEN.DIGICERT_USER_TOKEN);\r\n        props.logoutUser();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    history.push(\"/\");\r\n  };\r\n\r\n  if (!actor) {\r\n    return <Redirect to=\"/dashboard/USER\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <Header type={actor} actor={resolveActor()} logout={logout} />\r\n      <div className=\"dashboard-body\">\r\n        <Sidebar menu={menu} actor={actor} />\r\n        <div className=\"dashboard-content\">{resolveContent()}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.getIn([\"actor\", \"user\"]).toJS(),\r\n  admin: state.getIn([\"actor\", \"admin\"]).toJS(),\r\n  type: state.getIn([\"actor\", \"type\"]),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    async getUser(publicKey) {\r\n      try {\r\n        dispatch(setActorType(ACTOR.USER));\r\n        dispatch(setUser(await API.getUserByPublicKey(publicKey)));\r\n      } catch (e) {\r\n        console.log(e);\r\n        throw e;\r\n      }\r\n    },\r\n    async getAdmin(publicKey) {\r\n      try {\r\n        dispatch(setActorType(ACTOR.ADMIN));\r\n        dispatch(setAdmin(await API.getAdminByPublicKey(publicKey)));\r\n      } catch (e) {\r\n        console.log(e);\r\n        throw e;\r\n      }\r\n    },\r\n    logoutUser() {\r\n      setUser({});\r\n    },\r\n    logoutAdmin() {\r\n      setAdmin({});\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(React.memo(withRouter(Dashboard)));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}