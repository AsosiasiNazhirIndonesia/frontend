{"ast":null,"code":"'use strict';\n\nconst streamToValue = require('./stream-to-value');\n\n/*\r\n  Converts a stream to a single JSON value\r\n*/\nfunction streamToJsonValue(res, cb) {\n  streamToValue(res, (err, data) => {\n    if (err) {\n      return cb(err);\n    }\n    if (!data || data.length === 0) {\n      return cb();\n    }\n\n    // TODO: check if needed, afaik JSON.parse can parse Buffers\n    if (Buffer.isBuffer(data)) {\n      data = data.toString();\n    }\n    let res;\n    try {\n      res = JSON.parse(data);\n    } catch (err) {\n      return cb(err);\n    }\n    cb(null, res);\n  });\n}\nmodule.exports = streamToJsonValue;","map":{"version":3,"names":["streamToValue","require","streamToJsonValue","res","cb","err","data","length","Buffer","isBuffer","toString","JSON","parse","module","exports"],"sources":["C:/frontend/node_modules/ipfs-http-client/src/utils/stream-to-json-value.js"],"sourcesContent":["'use strict'\r\n\r\nconst streamToValue = require('./stream-to-value')\r\n\r\n/*\r\n  Converts a stream to a single JSON value\r\n*/\r\nfunction streamToJsonValue (res, cb) {\r\n  streamToValue(res, (err, data) => {\r\n    if (err) {\r\n      return cb(err)\r\n    }\r\n\r\n    if (!data || data.length === 0) {\r\n      return cb()\r\n    }\r\n\r\n    // TODO: check if needed, afaik JSON.parse can parse Buffers\r\n    if (Buffer.isBuffer(data)) {\r\n      data = data.toString()\r\n    }\r\n\r\n    let res\r\n    try {\r\n      res = JSON.parse(data)\r\n    } catch (err) {\r\n      return cb(err)\r\n    }\r\n\r\n    cb(null, res)\r\n  })\r\n}\r\n\r\nmodule.exports = streamToJsonValue\r\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,aAAa,GAAGC,OAAO,CAAC,mBAAmB,CAAC;;AAElD;AACA;AACA;AACA,SAASC,iBAAiBA,CAAEC,GAAG,EAAEC,EAAE,EAAE;EACnCJ,aAAa,CAACG,GAAG,EAAE,CAACE,GAAG,EAAEC,IAAI,KAAK;IAChC,IAAID,GAAG,EAAE;MACP,OAAOD,EAAE,CAACC,GAAG,CAAC;IAChB;IAEA,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAC9B,OAAOH,EAAE,EAAE;IACb;;IAEA;IACA,IAAII,MAAM,CAACC,QAAQ,CAACH,IAAI,CAAC,EAAE;MACzBA,IAAI,GAAGA,IAAI,CAACI,QAAQ,EAAE;IACxB;IAEA,IAAIP,GAAG;IACP,IAAI;MACFA,GAAG,GAAGQ,IAAI,CAACC,KAAK,CAACN,IAAI,CAAC;IACxB,CAAC,CAAC,OAAOD,GAAG,EAAE;MACZ,OAAOD,EAAE,CAACC,GAAG,CAAC;IAChB;IAEAD,EAAE,CAAC,IAAI,EAAED,GAAG,CAAC;EACf,CAAC,CAAC;AACJ;AAEAU,MAAM,CAACC,OAAO,GAAGZ,iBAAiB"},"metadata":{},"sourceType":"script"}